<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@tinalabs/react-tinacms-i18n</title>
	<meta name="description" content="Documentation for @tinalabs/react-tinacms-i18n">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@tinalabs/react-tinacms-i18n</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>@tinalabs/react-tinacms-i18n</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#react-tinacms-i18n" id="react-tinacms-i18n" style="color: inherit; text-decoration: none;">
					<h1>react-tinacms-i18n</h1>
				</a>
				<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
					<h2>Getting started</h2>
				</a>
				<pre><code class="language-bash">yarn add @tinalabs/react-tinacms-i18n</code></pre>
				<a href="#first-wrap-you-app-in-the-with-the-i18n-function" id="first-wrap-you-app-in-the-with-the-i18n-function" style="color: inherit; text-decoration: none;">
					<h2>First wrap you app in the with the i18n function</h2>
				</a>
				<p>We pass out app component along with the configuration for the plugin to the with tina plugin. If you dont want to use this helper function and want to setup stuff mananualy <a href="#withi18n-alternative">read here</a></p>
				<pre><code class="language-tsx">import { withI18n } from &#39;@tinalabs/react-tinacms-i18n&#39;;

const AppWrapper = withI18n(App, {
  ApiOptions: {
    localeList: [
      { language: &#39;en&#39;, region: &#39;ca&#39; },
      { language: &#39;fr&#39;, region: &#39;ca&#39; },
      { language: &#39;en&#39;, region: &#39;us&#39; },
      { language: &#39;sp&#39;, region: &#39;us&#39; },
    ],
  },
});</code></pre>
				<p>Note: this most also be inside the tina provider to your app return statement may look something like this</p>
				<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; {
  <span class="hljs-keyword">const</span> cms = <span class="hljs-keyword">new</span> TinaCMS({
    sidebar: {
      position: <span class="hljs-string">&#x27;displace&#x27;</span>,
    },
    enabled: <span class="hljs-literal">true</span>,
    toolbar: <span class="hljs-literal">true</span>,
  });
  <span class="hljs-keyword">return</span> (
    &lt;TinaProvider cms={cms}&gt;
      &lt;AppWrapper /&gt;
    &lt;/TinaProvider&gt;
  );
};</code></pre>
				<a href="#making-a-translation" id="making-a-translation" style="color: inherit; text-decoration: none;">
					<h3>Making a translation</h3>
				</a>
				<p>When we want to make a translation we can use the <code>useTranslation</code> hooks to localize our app. <code>useTranslation</code> returns a <code>t</code> function that is used for translating text and an instance of the localization plugin (called i18n)</p>
				<pre><code class="language-tsx">import { useTranslation } from &#39;@tinalabs/react-tinacms-i18n&#39;;
//..
const data = {heading: &#39;this is a heading&#39;}
const defaultData = {heading: &#39;heading&#39;, body: &#39;this is the body text&#39;}
const t = useTranslation(data, defaultData)
//..
// this displays &#39;this is a heading&#39;
&lt;h1&gt;
{t(&#39;heading&#39;)}
&lt;/h1&gt;

// ...
// this displays &#39;this is the body text&#39;
&lt;p&gt;
{t(&#39;body&#39;)}
&lt;/p&gt;</code></pre>
				<p>It also works with nested data</p>
				<pre><code class="language-tsx">import { useTranslation } from &#39;@tinalabs/react-tinacms-i18n&#39;;
//..
const data = {some: {nested: {data: &#39;hello world&#39;}}}
const t = useTranslation(data, defaultData)

//..
&lt;h1&gt;
{t(&#39;some.nested.data&#39;)}
&lt;/h1&gt;</code></pre>
				<a href="#switching-the-locale" id="switching-the-locale" style="color: inherit; text-decoration: none;">
					<h3>Switching the locale</h3>
				</a>
				<pre><code class="language-ts"><span class="hljs-keyword">import</span> { useI18n } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@tinalabs/react-tinacms-i18n&#x27;</span>;

i18n.setLocale({ region: <span class="hljs-string">&#x27;ca&#x27;</span>, language: <span class="hljs-string">&#x27;en&#x27;</span> });</code></pre>
				<a href="#fetching-data-based-on-the-locale" id="fetching-data-based-on-the-locale" style="color: inherit; text-decoration: none;">
					<h3>Fetching data based on the locale</h3>
				</a>
				<p>Get the formatted current locale</p>
				<pre><code class="language-ts"><span class="hljs-keyword">const</span> currentLocale = i18n.getFormateLocale();</code></pre>
				<p>Now one can use the currentLocal when fetching data</p>
				<pre><code class="language-ts"><span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`www.example.com/api/some/path/<span class="hljs-subst">${currentLocale}</span>`</span>);</code></pre>
				<a href="#using-the-locale-prompt" id="using-the-locale-prompt" style="color: inherit; text-decoration: none;">
					<h3>Using the locale prompt</h3>
				</a>
				<p>Register the plugin
				Note: this requires a peer dependency @tinalabs/react-tinacms-prompts</p>
				<p>so first first</p>
				<pre><code class="language-bash">npm i @tinalabs/react-tinacms-prompts --save</code></pre>
				<p>First wrap your app or a component with the prompt provider. The only stipulation is that it must be a child of the tina provider</p>
				<pre><code class="language-tsx">import { PromptProvider } from &#39;@tinalabs/react-tinacms-prompts&#39;;
&lt;PromptProvider&gt;
  &lt;App /&gt;
&lt;/PromptProvider&gt;;</code></pre>
				<p>Next we registers a <code>prompts plugin</code> that will render a prompt in edit mode letting the user know that no localization for this page exists. This will render when the given condition is true.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">import</span> { useLocalePromptPlugin } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@tinalabs/react-tinacms-i18n&#x27;</span>;

useLocalePromptPlugin(condition, options);</code></pre>
				<a href="#withi18n-alternative" id="withi18n-alternative" style="color: inherit; text-decoration: none;">
					<h2>WithI18n alternative</h2>
				</a>
				<p>This can be a bit confusing to do but may be necessary in some use cases.</p>
				<p>The General idea is this</p>
				<pre><code class="language-tsx">&lt;TinaProvider cms={cms}&gt;
  // register the localization plugin in here
  &lt;I18nProvider&gt;
    // register the toolbar plugin in here
    &lt;App /&gt;
  &lt;/I18nProvider&gt;
&lt;/TinaProvider&gt;</code></pre>
				<p>you can see how the <code>withTina</code> function does this</p>
				<pre><code class="language-tsx">export const withI18n = (Component: any, options: SetupProps) =&gt; {
  return (props: any) =&gt; {
    const cms = useCMS();
    const i18n = new ReactLocalizationAPI(
      options.ApiOptions.localeList,
      options.ApiOptions.imgMap
    );
    cms.registerApi(&#39;localization&#39;, i18n);
    const Wrapper = () =&gt; {
      useEffect(() =&gt; {
        cms.plugins.add(LocalePickerToolbarPlugin);
      }, []);
      return &lt;Component {...props} /&gt;;
    };
    return (
      &lt;I18nProvider i18n={i18n}&gt;
        &lt;Wrapper /&gt;
      &lt;/I18nProvider&gt;
    );
  };
};</code></pre>
				<a href="#generate-docs" id="generate-docs" style="color: inherit; text-decoration: none;">
					<h2>Generate Docs</h2>
				</a>
				<pre><code class="language-bash">yarn docs</code></pre>
				<p>or</p>
				<pre><code class="language-bash">npm run docs</code></pre>
				<p>This well generate the docs and you can open <code>docs/docs/index.html</code> in your browser to view</p>
				<a href="#api-docs" id="api-docs" style="color: inherit; text-decoration: none;">
					<h1><a href="https://tinacms.github.io/react-tinacms-i18n/docs/">API DOCS</a></h1>
				</a>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_components_i81nprovider_.html">&quot;src/components/<wbr>I81n<wbr>Provider&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_components_inlinetranslatedtext_.html">&quot;src/components/<wbr>Inline<wbr>Translated<wbr>Text&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_components_inlinetranslatedtextarea_.html">&quot;src/components/<wbr>Inline<wbr>Translated<wbr>Text<wbr>Area&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_components_localepickertoolbarplugin_.html">&quot;src/components/<wbr>Locale<wbr>Picker<wbr>Toolbar<wbr>Plugin&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_components_modalbuilder_.html">&quot;src/components/<wbr>Modal<wbr>Builder&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_hooks_usei18n_.html">&quot;src/hooks/use<wbr>I18n&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_hooks_uselocalepromptplugin_.html">&quot;src/hooks/use<wbr>Locale<wbr>Prompt<wbr>Plugin&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_hooks_usetranslation_.html">&quot;src/hooks/use<wbr>Translation&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_hooks_usetranslations_.html">&quot;src/hooks/use<wbr>Translations&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_localizationapi_localizationapi_.html">&quot;src/localization<wbr>Api/<wbr>LocalizationAPI&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_localizationapi_reactlocalizationapi_.html">&quot;src/localization<wbr>Api/<wbr>React<wbr>LocalizationAPI&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_plugins_prompt_plugin_.html">&quot;src/plugins/prompt-<wbr>plugin&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_src_setup_index_.html">&quot;src/setup/index&quot;</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>